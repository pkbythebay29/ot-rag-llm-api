<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>RAG Orchestrator</title>
<style>
 body{font:16px/1.5 system-ui,Segoe UI,Inter,Roboto,Arial,sans-serif;margin:0;background:#f7f7f8}
 .wrap{max-width:860px;margin:40px auto;padding:20px}
 .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:20px}
 .row{display:flex;gap:12px} .row>div{flex:1}
 input,button,select{font:inherit;padding:10px;border:1px solid #d1d5db;border-radius:10px}
 button{background:#0f62fe;color:#fff;border:0;cursor:pointer}
 #log{white-space:pre-wrap;background:#fafafa;border:1px solid #eee;padding:12px;border-radius:10px;margin-top:12px}
</style>
</head>
<body>
<div class="wrap"><div class="card">
  <h2>Start Agents</h2>
  <div class="row">
    <div><label>System</label><input id="system" value="TestSystem"></div>
    <div><label>Name Prefix</label><input id="namep" value="session1"></div>
  </div>
  <label>Agents</label>
  <div id="agents"></div>
  <button id="start">Start Selected</button>
  <div id="log"></div>
</div></div>
<script>
async function loadCatalog(){
  const res = await fetch('/orchestrator/catalog'); const cat = await res.json();
  const box = document.getElementById('agents');
  box.innerHTML = cat.map(c=>`<label style="display:block"><input type="checkbox" value="${c.entrypoint}"> ${c.title}</label>`).join('');
}
async function bulkStart(){
  const system = document.getElementById('system').value.trim()||null;
  const namep = document.getElementById('namep').value.trim()||'session';
  const selected=[...document.querySelectorAll('#agents input:checked')].map(i=>i.value);
  if(!selected.length){log('Select at least one agent.');return;}
  const r = await fetch('/orchestrator/agents/bulk',{method:'POST',headers:{'Content-Type':'application/json'},
    body: JSON.stringify({agent_types:selected,name_prefix:namep,system})});
  const j = await r.json(); log(JSON.stringify(j,null,2));
}
function log(t){ document.getElementById('log').textContent = t; }
document.getElementById('start').onclick=bulkStart;
loadCatalog();
</script>
</body></html>